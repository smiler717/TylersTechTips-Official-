<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Send feedback to Tyler's Tech Tips - help us improve our content and community">
  <meta property="og:title" content="Feedback - Tyler's Tech Tips">
  <meta property="og:description" content="Send feedback to Tyler's Tech Tips">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tylerstips.com/feedback.html">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@Tylers_TechTips">
  <meta name="twitter:creator" content="@Tylers_TechTips">
  <title>Feedback - Tyler's Tech Tips</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="Tyler's Tech Tips RSS Feed" href="/feed.xml">
  <script src="scripts/theme.js"></script>
</head>
<body>
  <!-- Reading Progress Bar -->
  <div class="progress-container">
    <div class="progress-bar"></div>
  </div>
  
  <header>
    <nav class="navbar">
      <div class="logo">
        <h1><a href="index.html"><i class="fas fa-laptop-code"></i> Tyler's Tech Tips</a></h1>
      </div>
      <div class="search-container">
        <input type="text" class="search-bar" placeholder="Search articles...">
        <i class="fas fa-search search-icon"></i>
      </div>
      <ul class="nav-links">
        <li><a href="index.html#home"><i class="fas fa-home"></i> Home</a></li>
        <li class="dropdown">
          <a href="articles.html"><i class="fas fa-newspaper"></i> Articles</a>
          <div class="dropdown-content">
            <a href="build-pc.html"><i class="fas fa-tools"></i> Building Your First PC</a>
            <a href="cpu-2025.html"><i class="fas fa-microchip"></i> Understanding CPUs in 2025</a>
            <a href="how-to-install-ssd.html"><i class="fas fa-hdd"></i> How to Install an SSD</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="projects.html"><i class="fas fa-project-diagram"></i> Projects</a>
          <div class="dropdown-content">
            <a href="windows-server-setup.html"><i class="fas fa-server"></i> Windows Server Setup</a>
            <a href="intune-setup.html"><i class="fas fa-mobile-alt"></i> Intune Implementation</a>
            <a href="network-monitoring.html"><i class="fas fa-chart-line"></i> Network Monitoring</a>
          </div>
        </li>
        <li><a href="community.html"><i class="fas fa-users"></i> Community</a></li>
        <li><a href="feedback.html" class="active"><i class="fas fa-comments"></i> Feedback</a></li>
        <li><a href="cheat-sheet.html"><i class="fas fa-book"></i> Cheat Sheet</a></li>
        <li><a href="about.html"><i class="fas fa-user"></i> About</a></li>
      </ul>
      <button id="theme-toggle" aria-label="Toggle theme">
        <span class="theme-icon">ðŸŒ™</span>
      </button>
    </nav>
  </header>

  <nav class="breadcrumb" aria-label="breadcrumb">
    <ol class="breadcrumb-list">
      <li class="breadcrumb-item"><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
      <li class="breadcrumb-separator" aria-hidden="true">/</li>
      <li class="breadcrumb-item breadcrumb-active" aria-current="page">Feedback</li>
    </ol>
  </nav>

  <main style="max-width: 900px; margin: 2rem auto; padding: 0 2rem;">
    <section>
      <h2><i class="fas fa-comments"></i> Send Us Feedback</h2>
      <p style="margin-bottom: 2rem;">We value your input! Whether you have a suggestion, found a bug, want to request a topic, or just want to say hello, we'd love to hear from you.</p>
      
      <div id="feedback-message" style="display: none; margin: 1rem 0; padding: 1rem; border-radius: 4px;"></div>
      
      <form id="feedback-form" style="max-width: 650px; margin: 0 auto;">
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text" id="name" name="name" placeholder="Your name (optional)" maxlength="60">
        </div>
        
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="Your email (optional)" maxlength="100">
          <small style="color: var(--text-muted); font-size: 0.875rem;">We'll only use this to respond to your feedback</small>
        </div>
        
        <div class="form-group">
          <label for="type">Feedback Type <span style="color: var(--accent);">*</span></label>
          <select id="type" name="type" required>
            <option value="">Select type...</option>
            <option value="suggestion">Suggestion</option>
            <option value="bug">Bug Report</option>
            <option value="topic-request">Topic Request</option>
            <option value="question">Question</option>
            <option value="other">Other</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="message">Message <span style="color: var(--accent);">*</span></label>
          <textarea id="message" name="message" rows="8" placeholder="Tell us what's on your mind..." required maxlength="2000"></textarea>
          <small style="color: var(--text-muted); font-size: 0.875rem;" id="char-count">0 / 2000 characters</small>
        </div>
        
        <button type="submit" class="pill" style="width: 100%; padding: 0.75rem; font-size: 1rem;">
          <i class="fas fa-paper-plane"></i> Send Feedback
        </button>
      </form>
    </section>

    <section style="margin-top: 3rem; text-align: center;">
      <h3><i class="fas fa-question-circle"></i> Other Ways to Connect</h3>
      <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; margin-top: 1rem;">
        <a href="community.html" class="pill">
          <i class="fas fa-users"></i> Join Community Forum
        </a>
        <a href="https://twitter.com/Tylers_TechTips" target="_blank" rel="noopener noreferrer" class="pill">
          <i class="fab fa-x-twitter"></i> Follow on X
        </a>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="community.html">Community</a></li>
          <li><a href="feedback.html">Feedback</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Popular Articles</h3>
        <ul>
          <li><a href="build-pc.html">Building Your First PC</a></li>
          <li><a href="cpu-2025.html">CPU Guide 2025</a></li>
          <li><a href="how-to-install-ssd.html">SSD Installation</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Contact & Follow</h3>
        <ul>
          <li><a href="https://x.com/Tylers_TechTips" target="_blank" rel="noopener noreferrer"><i class="fab fa-x-twitter"></i> @Tylers_TechTips</a></li>
          <li><a href="community.html"><i class="fas fa-comments"></i> Community Forum</a></li>
          <li><a href="mailto:contact@tylerstech.tips"><i class="fas fa-envelope"></i> Email</a></li>
        </ul>
      </div>
    </div>
    <div class="social-links">
      <a href="https://x.com/Tylers_TechTips" target="_blank" rel="noopener noreferrer" title="Follow on X (Twitter)"><i class="fab fa-x-twitter"></i></a>
      <a href="#" title="Instagram" aria-label="Instagram (link coming soon)"><i class="fab fa-instagram"></i></a>
      <a href="#" title="Facebook" aria-label="Facebook (link coming soon)"><i class="fab fa-facebook"></i></a>
      <a href="feed.xml" target="_blank" rel="noopener noreferrer" title="Subscribe via RSS"><i class="fas fa-rss"></i></a>
    </div>
    <div class="copyright">
      <p>Â© 2025 Tyler's Tech Tips. All rights reserved.</p>
    </div>
  </footer>

  <script src="scripts/reading-progress.js"></script>
  <script>
    // Generate device ID for rate limiting
    function getDeviceId() {
      let id = localStorage.getItem('device-id');
      if (!id) {
        id = 'dev-' + Math.random().toString(36).substr(2, 9) + Date.now().toString(36);
        localStorage.setItem('device-id', id);
      }
      return id;
    }

    const form = document.getElementById('feedback-form');
    const messageArea = document.getElementById('message');
    const charCount = document.getElementById('char-count');
    const feedbackMessage = document.getElementById('feedback-message');

    // Character counter
    messageArea.addEventListener('input', () => {
      const count = messageArea.value.length;
      charCount.textContent = `${count} / 2000 characters`;
    });

    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const name = document.getElementById('name').value.trim() || 'Anonymous';
      const email = document.getElementById('email').value.trim() || '';
      const type = document.getElementById('type').value;
      const message = messageArea.value.trim();

      if (!type || !message) {
        showMessage('Please fill out all required fields.', 'error');
        return;
      }

      const submitBtn = form.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';

      try {
        const res = await fetch('/api/feedback', {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'x-device-id': getDeviceId()
          },
          body: JSON.stringify({ name, email, type, message })
        });

        if (res.status === 429) {
          const data = await res.json();
          showMessage(`Please wait ${Math.ceil((data.waitMs || 60000) / 1000)}s before submitting again.`, 'error');
          return;
        }

        if (!res.ok) {
          throw new Error('Failed to submit feedback');
        }

        showMessage('Thank you for your feedback! We appreciate you taking the time to help us improve.', 'success');
        form.reset();
        charCount.textContent = '0 / 2000 characters';
      } catch (err) {
        console.error('Feedback error:', err);
        showMessage('Network error. Please try again later.', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Feedback';
      }
    });

    function showMessage(msg, type) {
      feedbackMessage.textContent = msg;
      feedbackMessage.style.display = 'block';
      feedbackMessage.style.backgroundColor = type === 'success' ? 'var(--success-bg, #d4edda)' : 'var(--error-bg, #f8d7da)';
      feedbackMessage.style.color = type === 'success' ? 'var(--success-text, #155724)' : 'var(--error-text, #721c24)';
      feedbackMessage.style.border = `1px solid ${type === 'success' ? 'var(--success-border, #c3e6cb)' : 'var(--error-border, #f5c6cb)'}`;
      
      if (type === 'success') {
        setTimeout(() => {
          feedbackMessage.style.display = 'none';
        }, 5000);
      }
    }
  </script>
</body>
</html>
